language: csharp
mono: none
dotnet: 2.1.802 # LTS
solution: KonSchool.sln
sudo: required
branches:
  only:
  - master
jobs:
  include:
    - os: linux
      dist: bionic # Ubuntu 18.04 (LTS)
    - os: osx
      osx_image: xcode11.2 # macOS 10.14 (Mojave)
  allow_failures:
    - os: osx
before_install:
  - dotnet --info
script:
    - dotnet restore
    - dotnet build
    - dotnet test tests/KonSchool.Tests.csproj
global:
    - DOTNET_SKIP_FIRST_TIME_EXPERIENCE=true
    - DOTNET_CLI_TELEMETRY_OPTOUT=1
deploy:
  provider: azure_web_apps
